{% spaceless %}
{"metadata":[
	{% for key, val in tabledata[0] %}
	{
		"name": "{{ key }}",
		{% if tableconfig and tableconfig[key] and tableconfig[key].label %}
		"label": "{{ tableconfig[key].label }}",
		{% else %}
		"label": "{{ key }}",
		{% endif %}
		{% if tableconfig and tableconfig[key] and tableconfig[key].datatype %}
		"datatype": "{{ tableconfig[key].datatype }}",
		{% else %}
		"datatype": "string",
		{% endif %}
		{% if tableconfig and tableconfig[key] and tableconfig[key].editable %}
		"editable": {{ tableconfig[key].editable ? 'true':'false' }},
		{% else %}
		"editable": true,
		{% endif %}
		{% if tableconfig and tableconfig[key] and tableconfig[key].values != false %}
			"values": {
			{% for key, val in tableconfig[key].values %}
				{% if loop.last %}
				"{{ key }}" : {
					{% for skey, sval in val %}
						{% if loop.last %}
						"{{ skey }}" : "{{ sval }}"
						{% else %}
						"{{ skey }}" : "{{ sval }}",
						{% endif %}
					{% endfor %}
				}
				{% else %}
				"{{ key }}" : {
					{% for skey, sval in val %}
						{% if loop.last %}
						"{{ skey }}" : "{{ sval }}"
						{% else %}
						"{{ skey }}" : "{{ sval }}",
						{% endif %}
					{% endfor %}
				},
				{% endif %}
				{% endfor %}
				}
		{% endif %}
	{% if loop.last %}
	}
	{% else %}
	},
	{% endif %}
	{% endfor %}
],

"data":[
	{% for val in tabledata %}
	{ 
		{% if loop.first %}
		{% for skey, sval in val %}
		{% if loop.first %}
		"id": "{{ skey }}",
		{% endif %}
		{% endfor %}
		{% endif %}
		"values": {
			{% for skey, sval in val %}
			{% if loop.last %}
			"{{ skey }}": "{{ sval }}"
			{% else %}
			"{{ skey }}": "{{ sval }}",
			{% endif %}
			{% endfor %}
		}
	{% if loop.last %}
	}
	{% else %}
	},
	{% endif %}
	{% endfor %}
]}
{% endspaceless %}